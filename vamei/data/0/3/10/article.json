{"content":"<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x4F5C;&#x8005;&#xFF1A;Vamei &#x51FA;&#x5904;&#xFF1A;http://www.cnblogs.com/vamei &#x6B22;&#x8FCE;&#x8F6C;&#x8F7D;&#xFF0C;&#x4E5F;&#x8BF7;&#x4FDD;&#x7559;&#x8FD9;&#x6BB5;&#x58F0;&#x660E;&#x3002;&#x8C22;&#x8C22;&#xFF01;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x4E0A;&#x4E00;&#x8BB2;&#x4ECB;&#x7ECD;&#x4E86;&#x7528;WebView&#x6765;&#x6293;&#x53D6;&#x4E00;&#x4E2A;&#x7F51;&#x9875;&#x5185;&#x5BB9;&#x3002;&#x8FD9;&#x4E00;&#x8BB2;&#x6211;&#x5C06;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5728;&#x5B89;&#x5353;&#x5185;&#x90E8;&#x76F4;&#x63A5;&#x8FDB;&#x884C;HTTP&#x901A;&#x4FE1;&#x3002;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x300A;&#x4E9A;&#x5F53;&#x7684;&#x8BDE;&#x751F;&#x300B;&#xFF0C;&#x897F;&#x65AF;&#x5EF7;&#x793C;&#x62DC;&#x5802;&#x7684;&#x540A;&#x9876;&#x753B;&#xFF0C;&#x7C73;&#x5F00;&#x6717;&#x57FA;&#x7F57;&#x4E4B;&#x4F5C;&#x3002;&#x5F53;&#x65F6;&#x7684;&#x6559;&#x7687;&#x5F3A;&#x8FEB;&#x6C89;&#x8FF7;&#x4E8E;&#x96D5;&#x5851;&#x7684;&#x7C73;&#x5F00;&#x6717;&#x57FA;&#x7F57;&#x753B;&#x5DE8;&#x5E45;&#x58C1;&#x753B;&#x3002;&#x7C73;&#x5F00;&#x6717;&#x57FA;&#x7F57;&#x8BA4;&#x4E3A;&#x8FD9;&#x662F;&#x5728;&#x6D6A;&#x8D39;&#x81EA;&#x5DF1;&#x7684;&#x624D;&#x534E;&#xFF0C;&#x5145;&#x6EE1;&#x6124;&#x6012;&#x7684;&#x4F5C;&#x753B;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4ED6;&#x53C8;&#x6210;&#x529F;&#x4E86;&#x3002;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\"><img style=\"display: block; margin-left: auto; margin-right: auto;\" src=\"http://images.cnitblog.com/i/413416/201408/202205591746864.jpg\" alt=\"\" width=\"754\" height=\"342\"></span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#xA0;</span></p>\r\n<h3><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x63CF;&#x8FF0;</span></h3>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x8FD9;&#x4E00;&#x8BB2;&#x4E2D;&#xFF0C;&#x6211;&#x5C06;&#x4F7F;&#x7528;JSON&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x5230;&#x8FDC;&#x7A0B;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x3002;&#x53CD;&#x8FC7;&#x6765;&#x6211;&#x4E5F;&#x5C06;&#x4ECE;&#x8FDC;&#x7A0B;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x6293;&#x53D6;&#x6761;&#x76EE;&#xFF0C;&#x5E76;&#x653E;&#x5165;&#x5B89;&#x5353;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;&#x76F8;&#x5173;&#x7684;&#x5B89;&#x5353;&#x77E5;&#x8BC6;&#x70B9;&#x5305;&#x62EC;&#xFF1A;</span></p>\r\n<ul>\r\n<li><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x7EBF;&#x7A0B;</span></li>\r\n<li><span style=\"font-family: &apos;courier new&apos;, courier;\">HTTP&#x901A;&#x4FE1;</span></li>\r\n<li><span style=\"font-family: &apos;courier new&apos;, courier;\">JSON</span></li>\r\n</ul>\r\n<p>&#xA0;</p>\r\n<h3><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x589E;&#x52A0;ActionBar</span></h3>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x6211;&#x9996;&#x5148;&#x5728;&#x9996;&#x9875;&#x4E0A;&#x589E;&#x52A0;&#x4E00;&#x83DC;&#x5355;&#xFF0C;&#x7528;&#x4E8E;&#x89E6;&#x53D1;&#x4E0B;&#x8F7D;&#x548C;&#x4E0A;&#x4F20;&#x529F;&#x80FD;&#x3002;&#x8FD9;&#x662F;&#x901A;&#x8FC7;ActionBar&#x5B9E;&#x73B0;&#x7684;&#x3002;ActionBar&#x5728;&#x9875;&#x9762;&#x7684;&#x9876;&#x7AEF;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x6A2A;&#x5E45;&#x3002;&#x8FD9;&#x4E2A;&#x6A2A;&#x5E45;&#x4E0A;&#x53EF;&#x4EE5;&#x6709;&#x5E94;&#x7528;&#x7684;&#x56FE;&#x6807;&#x3001;&#x6587;&#x5B57;&#x4FE1;&#x606F;&#x548C;&#x9009;&#x9879;&#x83DC;&#x5355;(OptionMenu)&#x3002;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\"><img style=\"display: block; margin-left: auto; margin-right: auto;\" src=\"http://images.cnitblog.com/blog/413416/201408/212146020039473.png\" alt=\"\"></span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x6211;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;res/menu/main.xml&#x4E2D;&#x5B9A;&#x4E49;ActionBar&#x7684;&#x83DC;&#x5355;&#xFF1A;</span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: &apos;courier new&apos;, courier;\"><span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">menu </span><span style=\"color: #ff0000;\">xmlns:android</span><span style=\"color: #0000ff;\">=&quot;http://schemas.android.com/apk/res/android&quot;</span><span style=\"color: #ff0000;\">\r\n    xmlns:app</span><span style=\"color: #0000ff;\">=&quot;http://schemas.android.com/apk/res-auto&quot;</span><span style=\"color: #ff0000;\">\r\n    xmlns:tools</span><span style=\"color: #0000ff;\">=&quot;http://schemas.android.com/tools&quot;</span> <span style=\"color: #0000ff;\">&gt;</span>\r\n\r\n    <span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">item\r\n        </span><span style=\"color: #ff0000;\">android:id</span><span style=\"color: #0000ff;\">=&quot;@+id/action_upload&quot;</span><span style=\"color: #ff0000;\">\r\n        android:orderInCategory</span><span style=\"color: #0000ff;\">=&quot;100&quot;</span><span style=\"color: #ff0000;\">\r\n        android:title</span><span style=\"color: #0000ff;\">=&quot;Upload&quot;</span><span style=\"color: #ff0000;\">\r\n        app:showAsAction</span><span style=\"color: #0000ff;\">=&quot;never&quot;</span><span style=\"color: #0000ff;\">/&gt;</span>  \r\n    <span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">item\r\n        </span><span style=\"color: #ff0000;\">android:id</span><span style=\"color: #0000ff;\">=&quot;@+id/action_download&quot;</span><span style=\"color: #ff0000;\">\r\n        android:orderInCategory</span><span style=\"color: #0000ff;\">=&quot;100&quot;</span><span style=\"color: #ff0000;\">\r\n        android:title</span><span style=\"color: #0000ff;\">=&quot;Download&quot;</span><span style=\"color: #ff0000;\">\r\n        app:showAsAction</span><span style=\"color: #0000ff;\">=&quot;never&quot;</span><span style=\"color: #0000ff;\">/&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">menu</span><span style=\"color: #0000ff;\">&gt;</span></span></pre>\r\n</div>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x73B0;&#x5728;&#xFF0C;&#x4FEE;&#x6539;&#x4E4B;&#x524D;&#x7684;MainActivity.java&#x3002;MainActivity&#x5C06;&#x7EE7;&#x627F;<span style=\"color: #800000;\">ActionBarActivity</span>&#x3002;&#x8FD9;&#x6837;&#xFF0C;MainActivity&#x9875;&#x9762;&#x7684;&#x9876;&#x7AEF;&#x5C06;&#x589E;&#x52A0;&#x4E00;&#x6761;ActionBar&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x8981;&#x8986;&#x76D6;ActionBarActivity&#x7684;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;&#x4E00;&#x4E2A;&#x662F;<span style=\"color: #800000;\">onCreateOptionsMenu()</span>&#x65B9;&#x6CD5;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6211;&#x7ED1;&#x5B9A;&#x4E0A;&#x9762;&#x7684;&#x89C6;&#x56FE;&#x6587;&#x4EF6;&#x5230;ActionBar&#x4E0A;&#x3002;&#x53E6;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;<span style=\"color: #800000;\">onOptionsItemSelected()</span>&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x8BF4;&#x660E;&#x83DC;&#x5355;&#x5404;&#x4E2A;&#x9009;&#x9879;&#x88AB;&#x70B9;&#x51FB;&#x540E;&#x7684;&#x52A8;&#x4F5C;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: &apos;courier new&apos;, courier;\"><span style=\"color: #0000ff;\">package</span><span style=\"color: #000000;\"> me.vamei.vamei;</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.content.Context;\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.content.Intent;\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.content.SharedPreferences;\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.os.Bundle;\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.support.v7.app.ActionBarActivity;</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.view.Menu;\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.view.MenuItem;\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.view.View;\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.view.View.OnClickListener;\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.widget.Button;\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> android.widget.TextView;</span><span style=\"color: #0000ff;\">public</span> <span style=\"color: #0000ff;\">class</span> MainActivity <span style=\"color: #0000ff;\">extends</span> ActionBarActivity <span style=\"color: #0000ff;\">implements</span><span style=\"color: #000000;\"> OnClickListener {\r\n    </span><span style=\"color: #0000ff;\">private</span><span style=\"color: #000000;\"> SharedPreferences sharedPref;\r\n    \r\n    @Override\r\n    </span><span style=\"color: #0000ff;\">protected</span> <span style=\"color: #0000ff;\">void</span><span style=\"color: #000000;\"> onCreate(Bundle savedInstanceState) {\r\n        </span><span style=\"color: #0000ff;\">super</span><span style=\"color: #000000;\">.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        \r\n        sharedPref </span>= <span style=\"color: #0000ff;\">this</span>.getSharedPreferences(&quot;me.vamei.vamei&quot;<span style=\"color: #000000;\">, \r\n                Context.MODE_PRIVATE);\r\n        \r\n        Button btn1 </span>=<span style=\"color: #000000;\"> (Button) findViewById(R.id.author);\r\n        btn1.setOnClickListener(</span><span style=\"color: #0000ff;\">this</span><span style=\"color: #000000;\">);\r\n        Button btn2 </span>=<span style=\"color: #000000;\"> (Button) findViewById(R.id.category);\r\n        btn2.setOnClickListener(</span><span style=\"color: #0000ff;\">this</span><span style=\"color: #000000;\">);        \r\n    }\r\n    \r\n    @Override\r\n    </span><span style=\"color: #0000ff;\">protected</span> <span style=\"color: #0000ff;\">void</span><span style=\"color: #000000;\"> onResume() {\r\n        </span><span style=\"color: #0000ff;\">super</span><span style=\"color: #000000;\">.onResume();\r\n        TextView nameView </span>=<span style=\"color: #000000;\"> (TextView) findViewById(R.id.welcome);\r\n        \r\n        </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> retrieve content from shared preference, with key &quot;name&quot;</span>\r\n        String   welcome  = &quot;Welcome, &quot; + sharedPref.getString(&quot;name&quot;, &quot;unknown&quot;) + &quot;!&quot;<span style=\"color: #000000;\">;\r\n        nameView.setText(welcome);\r\n    }\r\n\r\n    </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> method for interface OnClickListener</span>\r\n<span style=\"color: #000000;\">    @Override\r\n    </span><span style=\"color: #0000ff;\">public</span> <span style=\"color: #0000ff;\">void</span><span style=\"color: #000000;\"> onClick(View v) {\r\n        Intent intent;\r\n        </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> Routing to different view elements</span>\r\n        <span style=\"color: #0000ff;\">switch</span><span style=\"color: #000000;\">(v.getId()) {\r\n            </span><span style=\"color: #0000ff;\">case</span><span style=\"color: #000000;\"> R.id.author:\r\n                intent </span>= <span style=\"color: #0000ff;\">new</span> Intent(<span style=\"color: #0000ff;\">this</span><span style=\"color: #000000;\">, \r\n                        SelfEditActivity.</span><span style=\"color: #0000ff;\">class</span><span style=\"color: #000000;\">);\r\n                startActivity(intent);\r\n                </span><span style=\"color: #0000ff;\">break</span><span style=\"color: #000000;\">;\r\n            </span><span style=\"color: #0000ff;\">case</span><span style=\"color: #000000;\"> R.id.category:\r\n                intent </span>= <span style=\"color: #0000ff;\">new</span> Intent(<span style=\"color: #0000ff;\">this</span><span style=\"color: #000000;\">,\r\n                        CategoryActivity.</span><span style=\"color: #0000ff;\">class</span><span style=\"color: #000000;\">);\r\n                startActivity(intent);\r\n                </span><span style=\"color: #0000ff;\">break</span><span style=\"color: #000000;\">;\r\n        }\r\n    }\r\n    \r\n    @Override\r\n    </span><span style=\"color: #0000ff;\">public</span> <span style=\"color: #0000ff;\">boolean</span><span style=\"color: #000000;\"> onCreateOptionsMenu(Menu menu) {\r\n\r\n        </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> Inflate the menu; this adds items to the action bar if it is present.</span>\r\n<span style=\"color: #000000;\">        getMenuInflater().inflate(R.menu.main, menu);\r\n        </span><span style=\"color: #0000ff;\">return</span> <span style=\"color: #0000ff;\">true</span><span style=\"color: #000000;\">;\r\n    }\r\n\r\n    @Override\r\n    </span><span style=\"color: #0000ff;\">public</span> <span style=\"color: #0000ff;\">boolean</span><span style=\"color: #000000;\"> onOptionsItemSelected(MenuItem item) {\r\n        </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> Handle action bar item clicks here. The action bar will\r\n        </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> automatically handle clicks on the Home/Up button, so long\r\n        </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> as you specify a parent activity in AndroidManifest.xml.</span>\r\n        <span style=\"color: #0000ff;\">int</span> id =<span style=\"color: #000000;\"> item.getItemId();\r\n        </span><span style=\"color: #0000ff;\">switch</span><span style=\"color: #000000;\"> (id) {\r\n          </span><span style=\"color: #0000ff;\">case</span><span style=\"color: #000000;\"> R.id.action_download:\r\n                    </span><span style=\"color: #0000ff;\">return</span> <span style=\"color: #0000ff;\">true</span><span style=\"color: #000000;\">;\r\n                  </span><span style=\"color: #0000ff;\">case</span><span style=\"color: #000000;\"> R.id.action_upload:\r\n                    </span><span style=\"color: #0000ff;\">return</span> <span style=\"color: #0000ff;\">true</span><span style=\"color: #000000;\">;\r\n                }\r\n        </span><span style=\"color: #0000ff;\">return</span> <span style=\"color: #0000ff;\">super</span><span style=\"color: #000000;\">.onOptionsItemSelected(item);\r\n    }\r\n}</span></span></pre>\r\n</div>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x5728;&#x4E0A;&#x9762;&#xFF0C;&#x6211;&#x7684;onOptionsItemSelected()&#x65B9;&#x6CD5;&#x8FD8;&#x6CA1;&#x6709;&#x5305;&#x542B;&#x5177;&#x4F53;&#x7684;&#x529F;&#x80FD;&#x3002;&#x6211;&#x5C06;&#x5728;&#x4E0B;&#x4E00;&#x90E8;&#x5206;&#x4E3A;&#x8BE5;&#x65B9;&#x6CD5;&#x589E;&#x52A0;&#x529F;&#x80FD;&#x3002; &#x8FD0;&#x884C;&#x5E94;&#x7528;&#x540E;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\"><img style=\"display: block; margin-left: auto; margin-right: auto;\" src=\"http://images.cnitblog.com/blog/413416/201408/212129112211409.png\" alt=\"\" width=\"415\" height=\"633\"></span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#xA0;</span></p>\r\n<h3><span style=\"font-family: &apos;courier new&apos;, courier;\">HTTP&#x83B7;&#x5F97;&#x6570;&#x636E;</span></h3>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x4E0B;&#x4E00;&#x6B65;&#xFF0C;&#x6211;&#x5C06;&#x589E;&#x52A0;&quot;Download&quot;&#x6309;&#x94AE;&#x70B9;&#x51FB;&#x540E;&#x7684;&#x529F;&#x80FD;&#x3002;&#x6309;&#x94AE;&#x70B9;&#x51FB;&#x540E;&#xFF0C;&#x5E94;&#x7528;&#x5C06;&#x8BBF;&#x95EE;&#x4E92;&#x8054;&#x7F51;&#xFF0C;&#x5E76;&#x83B7;&#x5F97;URL&#x6307;&#x5411;&#x7684;.js&#x6587;&#x4EF6;&#x3002;&#x83B7;&#x5F97;.js&#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x6211;&#x4ECE;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x63D0;&#x53D6;JSON&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4E2D;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x65B0;&#x7684;Category&#x540D;&#x5B57;&#x3002;&#x6700;&#x540E;&#xFF0C;&#x6211;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x589E;&#x52A0;Category&#x6761;&#x76EE;:</span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: &apos;courier new&apos;, courier;\"><span style=\"color: #000000;\">@Override\r\n</span><span style=\"color: #0000ff;\">public</span> <span style=\"color: #0000ff;\">boolean</span><span style=\"color: #000000;\"> onOptionsItemSelected(MenuItem item) {\r\n    </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> Handle action bar item clicks here. The action bar will\r\n    </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> automatically handle clicks on the Home/Up button, so long\r\n    </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> as you specify a parent activity in AndroidManifest.xml.</span>\r\n    <span style=\"color: #0000ff;\">int</span> id =<span style=\"color: #000000;\"> item.getItemId();\r\n    </span><span style=\"color: #0000ff;\">switch</span><span style=\"color: #000000;\"> (id) {\r\n      </span><span style=\"color: #0000ff;\">case</span><span style=\"color: #000000;\"> R.id.action_download:\r\n            Thread thread </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> Thread() {\r\n                @Override\r\n                </span><span style=\"color: #0000ff;\">public</span> <span style=\"color: #0000ff;\">void</span><span style=\"color: #000000;\"> run(){\r\n                    </span><span style=\"color: #0000ff;\">try</span><span style=\"color: #000000;\">{\r\n                        </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> Http Get</span>\r\n<span style=\"color: #000000;\">                        InputStream content;\r\n                        HttpClient httpclient </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> DefaultHttpClient();\r\n                        HttpResponse response </span>=<span style=\"color: #000000;\"> httpclient.execute(\r\n                                </span><span style=\"color: #0000ff;\">new</span> HttpGet(&quot;http://files.cnblogs.com/vamei/android_contact.js&quot;<span style=\"color: #000000;\">));\r\n                        content </span>=<span style=\"color: #000000;\"> response.getEntity().getContent();\r\n                        BufferedReader reader </span>= <span style=\"color: #0000ff;\">new</span> BufferedReader(<span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> InputStreamReader(content));\r\n                        </span><span style=\"color: #0000ff;\">final</span> StringBuilder sb = <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> StringBuilder();\r\n                        String line </span>= <span style=\"color: #0000ff;\">null</span><span style=\"color: #000000;\">;\r\n                        \r\n                        </span><span style=\"color: #0000ff;\">while</span> ((line = reader.readLine()) != <span style=\"color: #0000ff;\">null</span><span style=\"color: #000000;\">) {\r\n                            sb.append(line);\r\n                        }\r\n                        content.close();\r\n                        \r\n                        </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> Parse JSON Object and Save to DB</span>\r\n                        JSONObject receivedObject = <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> JSONObject(sb.toString());\r\n                        JSONArray categoryObjects  </span>= receivedObject.getJSONArray(&quot;category&quot;<span style=\"color: #000000;\">);\r\n\r\n                        ContactsManager cm        </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> ContactsManager(getApplicationContext());\r\n                        JSONObject categoryObject;\r\n                        </span><span style=\"color: #0000ff;\">for</span> (<span style=\"color: #0000ff;\">int</span> i=0; i&lt; categoryObjects.length(); i++<span style=\"color: #000000;\">) {\r\n                            categoryObject </span>=<span style=\"color: #000000;\"> categoryObjects.getJSONObject(i);\r\n                            String name </span>= categoryObject.getString(&quot;name&quot;<span style=\"color: #000000;\">);\r\n                            Category category </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> Category(name);\r\n                            cm.createCategory(category); \r\n                        }\r\n                      } </span><span style=\"color: #0000ff;\">catch</span><span style=\"color: #000000;\"> (Exception e) {\r\n                        Log.i(</span>&quot;Http Error&quot;<span style=\"color: #000000;\">, e.getMessage().toString());\r\n                      }\r\n                }\r\n            };\r\n            thread.start();<br>            break;\r\n    }      \r\n    </span><span style=\"color: #0000ff;\">return</span> <span style=\"color: #0000ff;\">super</span><span style=\"color: #000000;\">.onOptionsItemSelected(item);\r\n}</span></span></pre>\r\n</div>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x6CE8;&#x610F;&#x5230;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x90E8;&#x5206;&#x542F;&#x52A8;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7EBF;&#x7A0B;<span style=\"color: #800000;\">Thread</span>&#x3002;&#x4E3A;&#x4E86;&#x786E;&#x4FDD;&#x754C;&#x9762;&#x7684;&#x6D41;&#x7545;&#xFF0C;&#x5B89;&#x5353;&#x89C4;&#x5B9A;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x4E0D;&#x80FD;&#x5728;&#x8D1F;&#x8D23;&#x56FE;&#x753B;&#x754C;&#x9762;&#x7684;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x8FDB;&#x884C;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x628A;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x7EBF;&#x7A0B;&#x4E2D;&#x3002;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x5F02;&#x6B65;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#xFF0C;&#x5C06;&#x5728;&#x4E0B;&#x4E00;&#x90E8;&#x5206;&#x4ECB;&#x7ECD;&#x3002;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;JSONObject&#x548C;JSONArray&#x7528;&#x4E8E;&#x89E3;&#x6790;&#x63A5;&#x6536;&#x5230;&#x7684;JSON&#x5B57;&#x7B26;&#x4E32;&#x3002;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#xA0;</span></p>\r\n<h3><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x4F7F;&#x7528;AsyncTask</span></h3>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">AsyncTask&#x5728;&#x80CC;&#x666F;&#x8FDB;&#x7A0B;&#x4E2D;&#x5DE5;&#x4F5C;&#x3002;AsyncTask&#x5206;&#x4E3A;&#x5DE5;&#x4F5C;&#x51C6;&#x5907;&#x3001;&#x5DE5;&#x4F5C;&#x8FDB;&#x884C;&#x548C;&#x5DE5;&#x4F5C;&#x5B8C;&#x6210;&#x4E09;&#x4E2A;&#x90E8;&#x5206;&#x3002;AsyncTask&#x6709;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;onPreExecute(), doInBackground(), onPostExecute()&#x5206;&#x522B;&#x4EE3;&#x8868;&#x8FD9;&#x4E09;&#x4E2A;&#x90E8;&#x5206;&#x7684;&#x4EFB;&#x52A1;&#x3002;&#x5176;&#x4E2D;&#xFF0C;doInBackground&#x5728;&#x80CC;&#x666F;&#x8FDB;&#x7A0B;&#x4E2D;&#x8FDB;&#x884C;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x628A;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x653E;&#x5165;&#x5176;&#x4E2D;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5728;doInBackground&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;publishProgress()&#xFF0C;&#x6765;&#x66F4;&#x65B0;&#x4EFB;&#x52A1;&#x7684;&#x8FDB;&#x5EA6;&#x3002;&#x8FDB;&#x5EA6;&#x66F4;&#x65B0;&#x540E;&#xFF0C;AsyncTask&#x5C06;&#x8C03;&#x7528;onProgressUpdate()&#x65B9;&#x6CD5;&#x3002;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\"><img style=\"display: block; margin-left: auto; margin-right: auto;\" src=\"http://images.cnitblog.com/blog/413416/201409/010534241415432.png\" alt=\"\"></span></p>\r\n<p>&#xA0;</p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">AsyncTask&#x6709;&#x4E09;&#x4E2A;&#x7C7B;&#x578B;&lt;X, Y, Z&gt;&#x3002;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x662F;doInBackground(X), onProgressUpdate(Y)&#x548C;onPostExecute(Z)&#x7684;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x3002;&#x6B64;&#x5916;&#xFF0C;doInBackground()&#x65B9;&#x6CD5;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x5C06;&#x6210;&#x4E3A;onPostExecute()&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x56E0;&#x6B64;doInBackground()&#x65B9;&#x6CD5;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E5F;&#x662F;Z&#x3002;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x5F53;&#x5DE5;&#x4F5C;&#x5B8C;&#x6210;&#xFF0C;AsyncTask&#x4F1A;&#x901A;&#x77E5;&#x4E3B;&#x7EBF;&#x7A0B;&#x3002;AsyncTask&#x4E0E;Thread&#x7684;&#x76EE;&#x7684;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x5B83;<span style=\"color: #ff0000;\">&#x5F02;&#x6B65;</span>&#x7684;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x66F4;&#x65B9;&#x4FBF;&#x7F16;&#x5199;&#xFF0C;&#x4E5F;&#x66F4;&#x5BB9;&#x6613;&#x5B9E;&#x73B0;&#x4E3B;&#x7EBF;&#x7A0B;&#x548C;&#x80CC;&#x666F;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x4FE1;&#x606F;&#x4F20;&#x9012;&#x3002;&#x6211;&#x4E0B;&#x9762;&#x4F1A;&#x5B9E;&#x73B0;Upload&#x7684;&#x5BF9;&#x5E94;&#x529F;&#x80FD;&#xFF0C;&#x5373;&#x628A;Category&#x8868;&#x8F6C;&#x6210;JSON&#xFF0C;&#x518D;&#x628A;&#x8BE5;JSON&#x5B57;&#x7B26;&#x4E32;&#x53D1;&#x9001;&#x5230;&#x7279;&#x5B9A;&#x7684;URL&#x3002;</span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: &apos;courier new&apos;, courier;\"><span style=\"color: #000000;\">@Override\r\n</span><span style=\"color: #0000ff;\">public</span> <span style=\"color: #0000ff;\">boolean</span><span style=\"color: #000000;\"> onOptionsItemSelected(MenuItem item) {\r\n    </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> Handle action bar item clicks here. The action bar will\r\n    </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> automatically handle clicks on the Home/Up button, so long\r\n    </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> as you specify a parent activity in AndroidManifest.xml.</span>\r\n    <span style=\"color: #0000ff;\">int</span> id =<span style=\"color: #000000;\"> item.getItemId();\r\n    </span><span style=\"color: #0000ff;\">switch</span><span style=\"color: #000000;\"> (id) {\r\n            </span><span style=\"color: #0000ff;\">case</span><span style=\"color: #000000;\"> R.id.action_download:\r\n              Thread thread </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> Thread() {\r\n                  @Override\r\n                </span><span style=\"color: #0000ff;\">public</span> <span style=\"color: #0000ff;\">void</span><span style=\"color: #000000;\"> run(){\r\n                    </span><span style=\"color: #0000ff;\">try</span><span style=\"color: #000000;\">{\r\n                        InputStream content;\r\n                        \r\n                        </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> Http Get</span>\r\n                        HttpClient httpclient = <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> DefaultHttpClient();\r\n                        HttpResponse response </span>=<span style=\"color: #000000;\"> httpclient.execute(\r\n                                </span><span style=\"color: #0000ff;\">new</span> HttpGet(&quot;http://files.cnblogs.com/vamei/android_contact.js&quot;<span style=\"color: #000000;\">));\r\n                        content </span>=<span style=\"color: #000000;\"> response.getEntity().getContent();\r\n                        BufferedReader reader </span>= <span style=\"color: #0000ff;\">new</span> BufferedReader(<span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> InputStreamReader(content));\r\n                        StringBuilder sb </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> StringBuilder();\r\n                        String line </span>= <span style=\"color: #0000ff;\">null</span><span style=\"color: #000000;\">;\r\n                        \r\n                        </span><span style=\"color: #0000ff;\">while</span> ((line = reader.readLine()) != <span style=\"color: #0000ff;\">null</span><span style=\"color: #000000;\">) {\r\n                            sb.append(line);\r\n                        }\r\n                        content.close();\r\n                        \r\n                        </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> Parse JSON Object and Save to DB</span>\r\n                        JSONObject receivedObject = <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> JSONObject(sb.toString());\r\n                        JSONArray categoryObjects </span>= receivedObject.getJSONArray(&quot;category&quot;<span style=\"color: #000000;\">);\r\n\r\n                        ContactsManager cm        </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> ContactsManager(getApplicationContext());\r\n                        JSONObject categoryObject;\r\n                        </span><span style=\"color: #0000ff;\">for</span> (<span style=\"color: #0000ff;\">int</span> i=0; i&lt; categoryObjects.length(); i++<span style=\"color: #000000;\">) {\r\n                            categoryObject </span>=<span style=\"color: #000000;\"> categoryObjects.getJSONObject(i);\r\n                            String name </span>= categoryObject.getString(&quot;name&quot;<span style=\"color: #000000;\">);\r\n                            Category category </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> Category(name);\r\n                            cm.createCategory(category); \r\n                        }\r\n                      } </span><span style=\"color: #0000ff;\">catch</span><span style=\"color: #000000;\"> (Exception e) {\r\n                        Log.i(</span>&quot;Http Error&quot;<span style=\"color: #000000;\">, e.getMessage().toString());\r\n                      }\r\n                }\r\n            };\r\n            thread.start();\r\n            </span><span style=\"color: #0000ff;\">break</span><span style=\"color: #000000;\">;\r\n          </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> upload action</span>\r\n          <span style=\"color: #0000ff;\">case</span><span style=\"color: #000000;\"> R.id.action_upload:\r\n        UploadTask newTask </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> UploadTask();\r\n        newTask.execute(</span>&quot;http://files.cnblogs.com/&quot;<span style=\"color: #000000;\">);\r\n        </span><span style=\"color: #0000ff;\">break</span><span style=\"color: #000000;\">;\r\n    }      \r\n    </span><span style=\"color: #0000ff;\">return</span> <span style=\"color: #0000ff;\">super</span><span style=\"color: #000000;\">.onOptionsItemSelected(item);\r\n}\r\n    \r\n</span><span style=\"color: #0000ff;\">private</span> <span style=\"color: #0000ff;\">class</span> UploadTask <span style=\"color: #0000ff;\">extends</span> AsyncTask &lt;String, String, String&gt;<span style=\"color: #000000;\"> {\r\n    </span><span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">main worker</span><span style=\"color: #008000;\">*/</span><span style=\"color: #000000;\">\r\n    @Override\r\n    </span><span style=\"color: #0000ff;\">protected</span><span style=\"color: #000000;\"> String doInBackground(String...params) {\r\n        ContactsManager cm  </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\">             ContactsManager(getApplicationContext());\r\n        List</span>&lt;Category&gt; categories =<span style=\"color: #000000;\"> cm.getAllCategories();\r\n        JSONObject sendObject </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> JSONObject();\r\n        JSONArray categoryObjects </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> JSONArray();\r\n        </span><span style=\"color: #0000ff;\">try</span><span style=\"color: #000000;\"> {\r\n            </span><span style=\"color: #0000ff;\">for</span> (<span style=\"color: #0000ff;\">int</span> i=0; i&lt;categories.size(); i++<span style=\"color: #000000;\">) {\r\n            JSONObject categoryObject </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> JSONObject();\r\n            categoryObject.put(</span>&quot;name&quot;<span style=\"color: #000000;\">,\r\n            categories.get(i).getName());\r\n            categoryObjects.put(categoryObject);\r\n                }\r\n            sendObject.put(</span>&quot;category&quot;<span style=\"color: #000000;\">, categoryObjects);\r\n                    </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> update progress once</span>\r\n                publishProgress(&quot;JSON DONE&quot;<span style=\"color: #000000;\">);\r\n\r\n            </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> posting to URL   </span>\r\n                HttpClient httpClient = <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> DefaultHttpClient();\r\n            HttpPost httpPost </span>= <span style=\"color: #0000ff;\">new</span> HttpPost(params[0<span style=\"color: #000000;\">]);\r\n            StringEntity se   </span>= <span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> StringEntity(sendObject.toString());\r\n                se.setContentEncoding(</span><span style=\"color: #0000ff;\">new</span><span style=\"color: #000000;\"> BasicHeader(HTTP.CONTENT_TYPE, \r\n                        </span>&quot;application/json&quot;<span style=\"color: #000000;\">));\r\n            httpPost.setEntity(se);\r\n            HttpResponse httpResponse </span>=<span style=\"color: #000000;\"> httpClient.execute(httpPost);\r\n                    </span><span style=\"color: #008000;\">//</span><span style=\"color: #008000;\"> update progress again</span>\r\n            publishProgress(&quot;NETWORK DONE&quot;<span style=\"color: #000000;\">);\r\n                \r\n            </span><span style=\"color: #0000ff;\">return</span><span style=\"color: #000000;\"> httpResponse.getStatusLine().toString();\r\n         } </span><span style=\"color: #0000ff;\">catch</span><span style=\"color: #000000;\"> (Exception e) {\r\n            e.printStackTrace();\r\n            </span><span style=\"color: #0000ff;\">return</span> &quot;Crashed&quot;<span style=\"color: #000000;\">;\r\n        }\r\n    }\r\n\r\n    </span><span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">after background work is done</span><span style=\"color: #008000;\">*/</span><span style=\"color: #000000;\">\r\n    @Override\r\n    </span><span style=\"color: #0000ff;\">protected</span> <span style=\"color: #0000ff;\">void</span><span style=\"color: #000000;\"> onPostExecute(String result) {\r\n        Toast.makeText(MainActivity.</span><span style=\"color: #0000ff;\">this</span><span style=\"color: #000000;\">, \r\n                result, Toast.LENGTH_LONG).show();\r\n    }\r\n    \r\n    </span><span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">when progress is updated</span><span style=\"color: #008000;\">*/</span><span style=\"color: #000000;\">\r\n    @Override\r\n    </span><span style=\"color: #0000ff;\">protected</span> <span style=\"color: #0000ff;\">void</span><span style=\"color: #000000;\"> onProgressUpdate(String...params) {\r\n        Toast.makeText(MainActivity.</span><span style=\"color: #0000ff;\">this</span><span style=\"color: #000000;\">, \r\n                params[</span>0<span style=\"color: #000000;\">], Toast.LENGTH_SHORT).show();\r\n    }\r\n}</span></span></pre>\r\n</div>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x8FD9;&#x91CC;&#x7684;URL&#x5E76;&#x4E0D;&#x80FD;&#x5904;&#x7406;POST&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x6709;&#x5174;&#x8DA3;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0A;&#x4E00;&#x90E8;&#x5206;&#x7684;Play&#x6846;&#x67B6;&#xFF0C;&#x81EA;&#x5236;&#x63A5;&#x53D7;POST&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5E76;&#x5904;&#x7406;&#x8FD9;&#x91CC;&#x4E0A;&#x4F20;&#x7684;JSON&#x3002;</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">&#xA0;</span></p>\r\n<h3><span style=\"font-family: &apos;courier new&apos;, courier;\">&#x603B;&#x7ED3;</span></h3>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">ActionBarActivity</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">Thread, AsyncTask</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">JSONObject, JSONArray</span></p>\r\n<p><span style=\"font-family: &apos;courier new&apos;, courier;\">Http, get and post</span></p>"}