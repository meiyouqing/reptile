{"content":"<p><span style=\"font-family: courier new,courier;\">&#x4F5C;&#x8005;&#xFF1A;Vamei &#x51FA;&#x5904;&#xFF1A;http://www.cnblogs.com/vamei &#x6B22;&#x8FCE;&#x8F6C;&#x8F7D;&#xFF0C;&#x4E5F;&#x8BF7;&#x4FDD;&#x7559;&#x8FD9;&#x6BB5;&#x58F0;&#x660E;&#x3002;&#x8C22;&#x8C22;&#xFF01;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"><span style=\"font-family: courier new,courier;\"><span style=\"color: #ff0000;\">**&#x6CE8;&#x610F;&#xFF0C;&#x5728;Python 3.x&#x4E2D;&#xFF0C;BaseHTTPServer, SimpleHTTPServer, CGIHTTPServer&#x6574;&#x5408;&#x5230;http.server&#x5305;&#xFF0C;SocketServer&#x6539;&#x540D;&#x4E3A;socketserver&#xFF0C;&#x8BF7;&#x6CE8;&#x610F;&#x67E5;&#x9605;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x3002;</span></span></span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x4E2D;(<a href=\"http://www.cnblogs.com/vamei/archive/2012/10/30/2744955.html\">&#x7528;socket&#x5199;&#x4E00;&#x4E2A;Python&#x670D;&#x52A1;&#x5668;</a>)&#xFF0C;&#x6211;&#x4F7F;&#x7528;socket&#x63A5;&#x53E3;&#xFF0C;&#x5236;&#x4F5C;&#x4E86;&#x4E00;&#x4E2A;&#x5904;&#x7406;HTTP&#x8BF7;&#x6C42;&#x7684;Python&#x670D;&#x52A1;&#x5668;&#x3002;&#x4EFB;&#x4F55;&#x4E00;&#x53F0;&#x88C5;&#x6709;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x548C;Python&#x89E3;&#x91CA;&#x5668;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;HTTP&#x670D;&#x52A1;&#x5668;&#x4F7F;&#x7528;&#x3002;&#x6211;&#x5C06;&#x5728;&#x8FD9;&#x91CC;&#x4E0D;&#x65AD;&#x6539;&#x5199;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x5F15;&#x5165;&#x66F4;&#x9AD8;&#x7EA7;&#x7684;Python&#x5305;&#xFF0C;&#x4EE5;&#x5199;&#x51FA;&#x66F4;&#x6210;&#x719F;&#x7684;Python&#x670D;&#x52A1;&#x5668;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<h3><span style=\"font-family: courier new,courier;\">&#x652F;&#x6301;POST<br></span></h3>\r\n<p><span style=\"font-family: courier new,courier;\">&#x6211;&#x9996;&#x5148;&#x589E;&#x52A0;&#x8BE5;&#x670D;&#x52A1;&#x5668;&#x7684;&#x529F;&#x80FD;&#x3002;&#x8FD9;&#x91CC;&#x589E;&#x6DFB;&#x4E86;&#x8868;&#x683C;&#xFF0C;&#x4EE5;&#x53CA;&#x5904;&#x7406;&#x8868;&#x683C;&#x63D0;&#x4EA4;&#x6570;&#x636E;&#x7684;&quot;POST&quot;&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5DF2;&#x7ECF;&#x8BFB;&#x8FC7;<a href=\"http://www.cnblogs.com/vamei/archive/2012/10/30/2744955.html\">&#x7528;socket&#x5199;&#x4E00;&#x4E2A;Python&#x670D;&#x52A1;&#x5668;</a>&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x8FD9;&#x91CC;&#x53EA;&#x662F;&#x589E;&#x52A0;&#x5F88;&#x5C11;&#x7684;&#x4E00;&#x70B9;&#x5185;&#x5BB9;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"><span style=\"color: #ff0000;\">&#x539F;&#x59CB;&#x7A0B;&#x5E8F;</span>:</span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: courier new,courier;\"><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Written by Vamei</span><span style=\"color: #008000;\">\r\n#</span><span style=\"color: #008000;\"> A messy HTTP server based on TCP socket </span>\r\n\r\n<span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> socket\r\n<span style=\"color: #008000;\"><br>#</span> <span style=\"color: #008000;\">Address</span>\r\nHOST </span>= <span style=\"color: #800000;\">&apos;&apos;</span><span style=\"color: #000000;\">\r\nPORT </span>= 8000<span style=\"color: #000000;\">\r\n\r\ntext_content </span>= <span style=\"color: #800000;\">&apos;&apos;&apos;</span><span style=\"color: #800000;\">\r\nHTTP/1.x 200 OK  \r\nContent-Type: text/html\r\n\r\n&lt;head&gt;\r\n&lt;title&gt;WOW&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;html&gt;\r\n&lt;p&gt;Wow, Python Server&lt;/p&gt;\r\n&lt;IMG src=&quot;test.jpg&quot;/&gt;\r\n&lt;form name=&quot;input&quot; action=&quot;/&quot; method=&quot;post&quot;&gt;\r\nFirst name:&lt;input type=&quot;text&quot; name=&quot;firstname&quot;&gt;&lt;br&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\r\n&lt;/form&gt; \r\n&lt;/html&gt;\r\n</span><span style=\"color: #800000;\">&apos;&apos;&apos;</span><span style=\"color: #000000;\">\r\n\r\nf </span>= open(<span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">test.jpg</span><span style=\"color: #800000;\">&apos;</span>,<span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">rb</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">)\r\npic_content </span>= <span style=\"color: #800000;\">&apos;&apos;&apos;</span><span style=\"color: #800000;\">\r\nHTTP/1.x 200 OK  \r\nContent-Type: image/jpg\r\n\r\n</span><span style=\"color: #800000;\">&apos;&apos;&apos;</span><span style=\"color: #000000;\">\r\npic_content </span>= pic_content +<span style=\"color: #000000;\"> f.read()\r\n\r\n<span style=\"color: #008000;\"># Configure socket</span>\r\ns    </span>=<span style=\"color: #000000;\"> socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\ns.bind((HOST, PORT))\r\n<br><span style=\"color: #008000;\"># Serve forever</span>\r\n</span><span style=\"color: #0000ff;\">while</span><span style=\"color: #000000;\"> True:\r\n    s.listen(</span>3<span style=\"color: #000000;\">)\r\n    conn, addr </span>=<span style=\"color: #000000;\"> s.accept()                    \r\n    request    </span>= conn.recv(1024)         <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> 1024 is the receiving buffer size</span>\r\n    method     = request.split(<span style=\"color: #800000;\">&apos;</span> <span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">)[0]\r\n    src        </span>= request.split(<span style=\"color: #800000;\">&apos;</span> <span style=\"color: #800000;\">&apos;</span>)[1<span style=\"color: #000000;\">]\r\n\r\n    </span><span style=\"color: #0000ff;\">print</span> <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">Connected by</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">, addr\r\n    </span><span style=\"color: #0000ff;\">print</span> <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">Request is:</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">, request\r\n<br>    <span style=\"color: #008000;\"># if GET method request</span>\r\n    </span><span style=\"color: #0000ff;\">if</span> method == <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">GET</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">:<br>        <span style=\"color: #008000;\"># if ULR is /test.jpg</span>\r\n        </span><span style=\"color: #0000ff;\">if</span> src == <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">/test.jpg</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">:\r\n            content </span>=<span style=\"color: #000000;\"> pic_content\r\n        </span><span style=\"color: #0000ff;\">else</span>: content =<span style=\"color: #000000;\"> text_content<br>        <span style=\"color: #008000;\"># send message</span>\r\n        conn.sendall(content)\r\n    <span style=\"color: #008000;\"># if POST method request</span>\r\n    </span><span style=\"color: #0000ff;\">if</span> method == <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">POST</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">:\r\n        form </span>= request.split(<span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">\\r\\n</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">)\r\n        idx </span>= form.index(<span style=\"color: #800000;\">&apos;&apos;</span>)             <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Find the empty line</span>\r\n        entry = form[idx:]               <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Main content of the request</span>\r\n<span style=\"color: #000000;\">\r\n        value </span>= entry[-1].split(<span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">=</span><span style=\"color: #800000;\">&apos;</span>)[-1<span style=\"color: #000000;\">]\r\n        conn.sendall(text_content </span>+ <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">\\n &lt;p&gt;</span><span style=\"color: #800000;\">&apos;</span> + value + <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">&lt;/p&gt;</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">)\r\n        </span><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\">#####</span>\r\n        <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> More operations, such as put the form into database</span>\r\n        <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> ...</span>\r\n        <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\">#####<br>    # close connection</span>\r\n    conn.close()</span></pre>\r\n</div>\r\n<p><span style=\"font-family: courier new,courier;\">&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5373;&#x4ECE;POST&#x8BF7;&#x6C42;&#x4E2D;&#x63D0;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x518D;&#x663E;&#x793A;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x8FD0;&#x884C;&#x4E0A;&#x9762;Python&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x50CF;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x90A3;&#x6837;&#xFF0C;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x6D4F;&#x89C8;&#x5668;&#x6253;&#x5F00;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"><img style=\"display: block; margin-left: auto; margin-right: auto;\" src=\"http://pic002.cnblogs.com/images/2012/413416/2012103117264627.png\" alt=\"\" width=\"628\" height=\"585\"></span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x9875;&#x9762;&#x65B0;&#x589E;&#x4E86;&#x8868;&#x683C;&#x548C;&#x63D0;&#x4EA4;(submit)&#x6309;&#x94AE;&#x3002;&#x5728;&#x8868;&#x683C;&#x4E2D;&#x8F93;&#x5165;aa&#x5E76;&#x63D0;&#x4EA4;&#xFF0C;&#x9875;&#x9762;&#x663E;&#x793A;&#x51FA;aa&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"><span>&#x6211;&#x4E0B;&#x4E00;&#x6B65;&#x8981;&#x7528;&#x4E00;&#x4E9B;&#x9AD8;&#x7EA7;&#x5305;&#xFF0C;&#x6765;&#x7B80;&#x5316;&#x4E4B;&#x524D;&#x7684;&#x4EE3;&#x7801;&#x3002;</span></span></p>\r\n<p>&#xA0;</p>\r\n<p>&#xA0;</p>\r\n<h3><span style=\"font-family: courier new,courier;\">&#x4F7F;&#x7528;SocketServer</span></h3>\r\n<p><span style=\"font-family: courier new,courier;\">&#x9996;&#x5148;&#x4F7F;&#x7528;SocketServer&#x5305;&#x6765;&#x65B9;&#x4FBF;&#x7684;&#x67B6;&#x8BBE;&#x670D;&#x52A1;&#x5668;&#x3002;&#x5728;&#x4E0A;&#x9762;&#x4F7F;&#x7528;socket&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;<span style=\"color: #ff0000;\">&#x5148;&#x8BBE;&#x7F6E;&#x4E86;socket&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x7136;&#x540E;&#x4F9D;&#x6B21;&#x8C03;&#x7528;bind(),listen(),accept()&#xFF0C;&#x6700;&#x540E;&#x4F7F;&#x7528;while&#x5FAA;&#x73AF;&#x6765;&#x8BA9;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x65AD;&#x7684;&#x63A5;&#x53D7;&#x8BF7;&#x6C42;</span>&#x3002;&#x4E0A;&#x9762;&#x7684;&#x8FD9;&#x4E9B;&#x6B65;&#x9AA4;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;SocketServer&#x5305;&#x6765;&#x7B80;&#x5316;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"><span style=\"color: #ff0000;\">SocketServer</span>:</span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: courier new,courier;\"><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Written by Vamei</span><span style=\"color: #008000;\">\r\n#</span><span style=\"color: #008000;\"> use TCPServer</span>\r\n\r\n<span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> SocketServer\r\n\r\nHOST </span>= <span style=\"color: #800000;\">&apos;&apos;</span><span style=\"color: #000000;\">\r\nPORT </span>= 8000<span style=\"color: #000000;\">\r\n\r\ntext_content </span>= <span style=\"color: #800000;\">&apos;&apos;&apos;</span><span style=\"color: #800000;\">\r\nHTTP/1.x 200 OK  \r\nContent-Type: text/html\r\n\r\n&lt;head&gt;\r\n&lt;title&gt;WOW&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;html&gt;\r\n&lt;p&gt;Wow, Python Server&lt;/p&gt;\r\n&lt;IMG src=&quot;test.jpg&quot;/&gt;\r\n&lt;form name=&quot;input&quot; action=&quot;/&quot; method=&quot;post&quot;&gt;\r\nFirst name:&lt;input type=&quot;text&quot; name=&quot;firstname&quot;&gt;&lt;br&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\r\n&lt;/form&gt; \r\n&lt;/html&gt;\r\n</span><span style=\"color: #800000;\">&apos;&apos;&apos;</span><span style=\"color: #000000;\">\r\n\r\nf </span>= open(<span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">test.jpg</span><span style=\"color: #800000;\">&apos;</span>,<span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">rb</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">)\r\npic_content </span>= <span style=\"color: #800000;\">&apos;&apos;&apos;</span><span style=\"color: #800000;\">\r\nHTTP/1.x 200 OK  \r\nContent-Type: image/jpg\r\n\r\n</span><span style=\"color: #800000;\">&apos;&apos;&apos;</span><span style=\"color: #000000;\">\r\npic_content </span>= pic_content +<span style=\"color: #000000;\"> f.read()\r\n\r\n<span style=\"color: #008000;\"># This class defines response to each request</span>\r\n</span><span style=\"color: #0000ff;\">class</span><span style=\"color: #000000;\"> MyTCPHandler(SocketServer.BaseRequestHandler):\r\n    </span><span style=\"color: #0000ff;\">def</span><span style=\"color: #000000;\"> handle(self):\r\n        </span><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> self.request is the TCP socket connected to the client</span>\r\n        request = self.request.recv(1024<span style=\"color: #000000;\">)\r\n\r\n        </span><span style=\"color: #0000ff;\">print</span> <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">Connected by</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">,self.client_address[0]\r\n        </span><span style=\"color: #0000ff;\">print</span> <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">Request is</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">, request\r\n\r\n        method     </span>= request.split(<span style=\"color: #800000;\">&apos;</span> <span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">)[0]\r\n        src        </span>= request.split(<span style=\"color: #800000;\">&apos;</span> <span style=\"color: #800000;\">&apos;</span>)[1<span style=\"color: #000000;\">]\r\n\r\n        </span><span style=\"color: #0000ff;\">if</span> method == <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">GET</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">:\r\n            </span><span style=\"color: #0000ff;\">if</span> src == <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">/test.jpg</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">:\r\n                content </span>=<span style=\"color: #000000;\"> pic_content\r\n            </span><span style=\"color: #0000ff;\">else</span>: content =<span style=\"color: #000000;\"> text_content\r\n            self.request.sendall(content)\r\n\r\n        </span><span style=\"color: #0000ff;\">if</span> method == <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">POST</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">:\r\n            form </span>= request.split(<span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">\\r\\n</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">)\r\n            idx </span>= form.index(<span style=\"color: #800000;\">&apos;&apos;</span>)             <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Find the empty line</span>\r\n            entry = form[idx:]               <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Main content of the request</span>\r\n<span style=\"color: #000000;\">\r\n            value </span>= entry[-1].split(<span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">=</span><span style=\"color: #800000;\">&apos;</span>)[-1<span style=\"color: #000000;\">]\r\n            self.request.sendall(text_content </span>+ <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">\\n &lt;p&gt;</span><span style=\"color: #800000;\">&apos;</span> + value + <span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">&lt;/p&gt;</span><span style=\"color: #800000;\">&apos;</span><span style=\"color: #000000;\">)\r\n            </span><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\">#####</span>\r\n            <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> More operations, such as put the form into database</span>\r\n            <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> ...</span>\r\n            <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\">#####</span>\r\n\r\n\r\n<span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Create the server</span>\r\nserver =<span style=\"color: #000000;\"> SocketServer.TCPServer((HOST, PORT), MyTCPHandler)\r\n</span><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Start the server, and work forever</span>\r\nserver.serve_forever()</span></pre>\r\n</div>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x6211;&#x5EFA;&#x7ACB;&#x4E86;&#x4E00;&#x4E2A;<span style=\"color: #800000;\">TCPServer</span>&#x5BF9;&#x8C61;&#xFF0C;&#x5373;&#x4E00;&#x4E2A;&#x4F7F;&#x7528;TCP socket&#x7684;&#x670D;&#x52A1;&#x5668;&#x3002;&#x5728;&#x5EFA;&#x7ACB;TCPServe&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x8BBE;&#x7F6E;&#x8BE5;&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#x3002;&#x4F7F;&#x7528;<span style=\"color: #800000;\">server_forever()</span>&#x65B9;&#x6CD5;&#x6765;&#x8BA9;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x65AD;&#x5DE5;&#x4F5C;(&#x5C31;&#x50CF;&#x539F;&#x59CB;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;while&#x5FAA;&#x73AF;&#x4E00;&#x6837;)&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x6211;&#x4EEC;&#x4F20;&#x9012;&#x7ED9;TCPServer&#x4E00;&#x4E2A;MyTCPHandler&#x7C7B;&#x3002;&#x8FD9;&#x4E2A;&#x7C7B;&#x5B9A;&#x4E49;&#x4E86;&#x5982;&#x4F55;&#x64CD;&#x4F5C;socket&#x3002;MyTCPHandler&#x7EE7;&#x627F;&#x81EA;BaseRequestHandler&#x3002;&#x6539;&#x5199;<span style=\"color: #800000;\">handler()</span>&#x65B9;&#x6CD5;&#xFF0C;&#x6765;&#x5177;&#x4F53;&#x89C4;&#x5B9A;&#x4E0D;&#x540C;&#x60C5;&#x51B5;&#x4E0B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x64CD;&#x4F5C;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x5728;handler()&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;<span style=\"color: #800000;\">self.request</span>&#x6765;&#x67E5;&#x8BE2;&#x901A;&#x8FC7;socket&#x8FDB;&#x5165;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8BF7;&#x6C42; (&#x6B63;&#x5982;&#x6211;&#x4EEC;&#x5728;handler()&#x4E2D;&#x5BF9;socket&#x8FDB;&#x884C;<span style=\"color: #800000;\">recv()</span>&#x548C;<span style=\"color: #800000;\">sendall()</span>&#x64CD;&#x4F5C;)&#xFF0C;&#x8FD8;&#x4F7F;&#x7528;<span style=\"color: #800000;\">self.address</span>&#x6765;&#x5F15;&#x7528;socket&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5730;&#x5740;&#x3002;</span></p>\r\n<p>&#xA0;</p>\r\n<p><span style=\"font-family: courier new,courier;\"><span>&#x7ECF;&#x8FC7;SocketServer&#x7684;&#x6539;&#x9020;&#x4E4B;&#x540E;&#xFF0C;&#x4EE3;&#x7801;&#x8FD8;&#x662F;&#x4E0D;&#x591F;&#x7B80;&#x5355;&#x3002;</span>&#xA0;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x7684;&#x901A;&#x4FE1;&#x57FA;&#x4E8E;TCP&#x534F;&#x8BAE;&#xFF0C;&#x800C;&#x4E0D;&#x662F;HTTP&#x534F;&#x8BAE;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x624B;&#x52A8;&#x7684;&#x89E3;&#x6790;HTTP&#x534F;&#x8BAE;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x5EFA;&#x7ACB;&#x57FA;&#x4E8E;HTTP&#x534F;&#x8BAE;&#x7684;&#x670D;&#x52A1;&#x5668;&#x3002;</span></p>\r\n<p>&#xA0;</p>\r\n<h3><span style=\"font-family: courier new,courier;\">SimpleHTTPServer: &#x4F7F;&#x7528;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x6765;&#x56DE;&#x5E94;&#x8BF7;&#x6C42;</span></h3>\r\n<p><span style=\"font-family: courier new,courier;\">HTTP&#x534F;&#x8BAE;&#x57FA;&#x4E8E;TCP&#x534F;&#x8BAE;&#xFF0C;&#x4F46;&#x589E;&#x52A0;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x89C4;&#x8303;&#x3002;&#x8FD9;&#x4E9B;&#x89C4;&#x8303;&#xFF0C;&#x867D;&#x7136;&#x9650;&#x5236;&#x4E86;TCP&#x534F;&#x8BAE;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x5927;&#x5927;&#x63D0;&#x9AD8;&#x4E86;&#x4FE1;&#x606F;&#x5C01;&#x88C5;&#x548C;&#x63D0;&#x53D6;&#x7684;&#x65B9;&#x4FBF;&#x7A0B;&#x5EA6;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"> &#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;HTTP&#x8BF7;&#x6C42;(request)&#x6765;&#x8BF4;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x6709;&#x4E24;&#x4E2A;&#x91CD;&#x8981;&#x4FE1;&#x606F;&#xFF1A;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x548C;URL&#x3002;</span></p>\r\n<p><span style=\"color: #0000ff; font-family: courier new,courier;\">&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;(request method)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; URL&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x64CD;&#x4F5C;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">GET&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x53D1;&#x9001;text_content</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">GET&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; /text.jpg&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x53D1;&#x9001;pic_content</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">POST&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x5206;&#x6790;request&#x4E3B;&#x4F53;&#x4E2D;&#x5305;&#x542B;&#x7684;value(&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6211;&#x4EEC;&#x586B;&#x5165;&#x8868;&#x683C;&#x7684;&#x5185;&#x5BB9;); &#x53D1;&#x9001;text_content&#x548C;value</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x548C;URL&#x7684;&#x4E0D;&#x540C;&#xFF0C;&#x4E00;&#x4E2A;&#x5927;&#x578B;&#x7684;HTTP&#x670D;&#x52A1;&#x5668;&#x53EF;&#x4EE5;&#x5E94;&#x4ED8;&#x6210;&#x5343;&#x4E0A;&#x4E07;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x8BF7;&#x6C42;&#x3002;&#x5728;Python&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;SimpleHTTPServer&#x5305;&#x548C;CGIHTTPServer&#x5305;&#x6765;&#x89C4;&#x5B9A;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x8BF7;&#x6C42;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x5176;&#x4E2D;&#xFF0C;SimpleHTTPServer&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x5904;&#x7406;<span style=\"color: #800000;\">GET</span>&#x65B9;&#x6CD5;&#x548C;<span style=\"color: #800000;\">HEAD</span>&#x65B9;&#x6CD5;&#x7684;&#x8BF7;&#x6C42;&#x3002;&#x5B83;&#x8BFB;&#x53D6;request&#x4E2D;&#x7684;URL&#x5730;&#x5740;&#xFF0C;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;<span style=\"color: #ff0000;\">&#x9759;&#x6001;&#x6587;&#x4EF6;</span>&#xFF0C;&#x5206;&#x6790;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#xFF0C;&#x7528;HTTP&#x534F;&#x8BAE;&#x5C06;&#x6587;&#x4EF6;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"><img style=\"display: block; margin-left: auto; margin-right: auto;\" src=\"http://pic002.cnblogs.com/images/2012/413416/2012103116160628.jpg\" alt=\"\" width=\"422\" height=\"377\"></span></p>\r\n<p style=\"text-align: center;\"><span style=\"font-family: courier new,courier;\">SimpleHTTPServer</span></p>\r\n<p style=\"text-align: center;\"><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x6211;&#x4EEC;&#x5C06;text_content&#x653E;&#x7F6E;&#x5728;index.html&#x4E2D;&#xFF0C;&#x5E76;&#x5355;&#x72EC;&#x5B58;&#x50A8;text.jpg&#x6587;&#x4EF6;&#x3002;&#x5982;&#x679C;URL&#x6307;&#x5411;index_html&#x7684;&#x6BCD;&#x6587;&#x4EF6;&#x5939;&#x65F6;&#xFF0C;SimpleHTTPServer&#x4F1A;&#x8BFB;&#x53D6;&#x8BE5;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x7684;index.html&#x6587;&#x4EF6;&#x3002;</span></p>\r\n<p>&#xA0;</p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x6211;&#x5728;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x751F;&#x6210;index.html&#x6587;&#x4EF6;:</span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: courier new,courier;\"><span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">head</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">title</span><span style=\"color: #0000ff;\">&gt;</span>WOW<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">title</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">head</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">html</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">p</span><span style=\"color: #0000ff;\">&gt;</span>Wow, Python Server<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">p</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">IMG </span><span style=\"color: #ff0000;\">src</span><span style=\"color: #0000ff;\">=&quot;test.jpg&quot;</span><span style=\"color: #0000ff;\">/&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">form </span><span style=\"color: #ff0000;\">name</span><span style=\"color: #0000ff;\">=&quot;input&quot;</span><span style=\"color: #ff0000;\"> action</span><span style=\"color: #0000ff;\">=&quot;/&quot;</span><span style=\"color: #ff0000;\"> method</span><span style=\"color: #0000ff;\">=&quot;post&quot;</span><span style=\"color: #0000ff;\">&gt;</span><span style=\"color: #000000;\">\r\nFirst name:</span><span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">input </span><span style=\"color: #ff0000;\">type</span><span style=\"color: #0000ff;\">=&quot;text&quot;</span><span style=\"color: #ff0000;\"> name</span><span style=\"color: #0000ff;\">=&quot;firstname&quot;</span><span style=\"color: #0000ff;\">&gt;&lt;</span><span style=\"color: #800000;\">br</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">input </span><span style=\"color: #ff0000;\">type</span><span style=\"color: #0000ff;\">=&quot;submit&quot;</span><span style=\"color: #ff0000;\"> value</span><span style=\"color: #0000ff;\">=&quot;Submit&quot;</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">form</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">html</span><span style=\"color: #0000ff;\">&gt;</span></span></pre>\r\n</div>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x6539;&#x5199;Python&#x670D;&#x52A1;&#x5668;&#x7A0B;&#x5E8F;&#x3002;&#x4F7F;&#x7528;<span style=\"color: #800000;\">SimpleHTTPServer</span>&#x5305;&#x4E2D;&#x552F;&#x4E00;&#x7684;&#x7C7B;<span style=\"color: #ff0000;\"><span style=\"color: #800000;\">SimpleHTTPRequestHandler</span>:</span></span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: courier new,courier;\"><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Written by Vamei</span><span style=\"color: #008000;\">\r\n#</span><span style=\"color: #008000;\"> Simple HTTPsERVER</span>\r\n\r\n<span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> SocketServer\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> SimpleHTTPServer\r\n\r\nHOST </span>= <span style=\"color: #800000;\">&apos;&apos;</span><span style=\"color: #000000;\">\r\nPORT </span>= 8000\r\n\r\n<span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Create the server, SimpleHTTPRequestHander is pre-defined handler in SimpleHTTPServer package</span>\r\nserver =<span style=\"color: #000000;\"> SocketServer.TCPServer((HOST, PORT), SimpleHTTPServer.SimpleHTTPRequestHandler)\r\n</span><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Start the server</span><span style=\"color: #000000;\">\r\nserver.serve_forever()</span></span></pre>\r\n</div>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x8FD9;&#x91CC;&#x7684;&#x7A0B;&#x5E8F;<span style=\"color: #ff0000;\">&#x4E0D;&#x80FD;&#x5904;&#x7406;POST&#x8BF7;&#x6C42;<span style=\"color: #000000;\">&#x3002;</span></span>&#x6211;&#x4F1A;&#x5728;&#x540E;&#x9762;&#x4F7F;&#x7528;CGI&#x6765;&#x5F25;&#x8865;&#x8FD9;&#x4E2A;&#x7F3A;&#x9677;&#x3002;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;Python&#x670D;&#x52A1;&#x5668;&#x7A0B;&#x5E8F;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;&#x5C06;&#x5185;&#x5BB9;&#x5B58;&#x653E;&#x4E8E;&#x9759;&#x6001;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x6839;&#x636E;URL&#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x63D0;&#x4F9B;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x8BA9;&#x5185;&#x5BB9;&#x548C;&#x670D;&#x52A1;&#x5668;&#x903B;&#x8F91;&#x5206;&#x79BB;&#x3002;&#x6BCF;&#x6B21;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;&#x6211;&#x53EF;&#x4EE5;&#x53EA;&#x4FEE;&#x6539;&#x9759;&#x6001;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x505C;&#x6B62;&#x6574;&#x4E2A;Python&#x670D;&#x52A1;&#x5668;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x8FD9;&#x4E9B;&#x6539;&#x8FDB;&#x4E5F;<span style=\"color: #000000;\">&#x4ED8;&#x51FA;&#x4EE3;&#x4EF7;</span>&#x3002;&#x5728;&#x539F;&#x59CB;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;request&#x4E2D;&#x7684;URL&#x53EA;&#x5177;&#x6709;&#x6307;&#x5BFC;&#x610F;&#x4E49;&#xFF0C;&#x6211;&#x53EF;&#x4EE5;&#x89C4;&#x5B9A;&#x4EFB;&#x610F;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x5728;SimpleHTTPServer&#x4E2D;&#xFF0C;&#x64CD;&#x4F5C;&#x4E0E;URL&#x7684;&#x6307;&#x5411;&#x5BC6;&#x5207;&#x76F8;&#x5173;&#x3002;&#x6211;&#x7528;&#x81EA;&#x7531;&#x5EA6;&#xFF0C;&#x6362;&#x6765;&#x4E86;&#x66F4;&#x52A0;&#x7B80;&#x6D01;&#x7684;&#x7A0B;&#x5E8F;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<h3><span style=\"font-family: courier new,courier;\">CGIHTTPServer&#xFF1A;&#x4F7F;&#x7528;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x6216;&#x8005;CGI&#x6765;&#x56DE;&#x5E94;&#x8BF7;&#x6C42;</span></h3>\r\n<p><span style=\"font-family: courier new,courier;\">CGIHTTPServer&#x5305;&#x4E2D;&#x7684;CGIHTTPRequestHandler&#x7C7B;&#x7EE7;&#x627F;&#x81EA;SimpleHTTPRequestHandler&#x7C7B;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x4EE3;&#x66FF;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x6765;&#x63D0;&#x4F9B;<span style=\"color: #ff0000;\">&#x9759;&#x6001;&#x6587;&#x4EF6;</span>&#x7684;&#x670D;&#x52A1;&#x3002;&#x6B64;&#x5916;&#xFF0C;CGIHTTPRequestHandler&#x7C7B;&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x8FD0;&#x884C;<span style=\"color: #ff0000;\">CGI&#x811A;&#x672C;</span>&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"><img style=\"display: block; margin-left: auto; margin-right: auto;\" src=\"http://pic002.cnblogs.com/images/2012/413416/2012103116413014.jpg\" alt=\"\" width=\"410\" height=\"455\"></span></p>\r\n<p style=\"text-align: center;\"><span style=\"font-family: courier new,courier;\">CGIHTTPServer</span></p>\r\n<p style=\"text-align: center;\"><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x5148;&#x770B;&#x770B;&#x4EC0;&#x4E48;&#x662F;<span style=\"color: #ff0000;\">CGI</span> (Common Gateway Interface)&#x3002;CGI&#x662F;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5E94;&#x7528;&#x811A;&#x672C;&#x4E4B;&#x95F4;&#x7684;&#x4E00;&#x5957;&#x63A5;&#x53E3;&#x6807;&#x51C6;&#x3002;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x662F;&#x8BA9;&#x670D;&#x52A1;&#x5668;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;<span style=\"color: #ff0000;\">&#x811A;&#x672C;&#x7A0B;&#x5E8F;</span>&#xFF0C;&#x5C06;<span style=\"color: #ff0000;\">&#x7A0B;&#x5E8F;</span><span style=\"color: #ff0000;\">&#x7684;&#x8F93;&#x51FA;</span>&#x4F5C;&#x4E3A;response&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x3002;&#x603B;&#x4F53;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x662F;&#x5141;&#x8BB8;&#x670D;&#x52A1;&#x5668;&#x52A8;&#x6001;&#x7684;&#x751F;&#x6210;&#x56DE;&#x590D;&#x5185;&#x5BB9;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#x5C40;&#x9650;&#x4E8E;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x652F;&#x6301;CGI&#x7684;&#x670D;&#x52A1;&#x5668;&#x7A0B;&#x63A5;&#x6536;&#x5230;&#x5BA2;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x4E2D;&#x7684;URL&#xFF0C;&#x8FD0;&#x884C;&#x5BF9;&#x5E94;&#x7684;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x3002;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x5C06;HTTP&#x8BF7;&#x6C42;&#x7684;&#x4FE1;&#x606F;&#x548C;socket&#x4FE1;&#x606F;&#x4F20;&#x9012;&#x7ED9;&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x7B49;&#x5F85;&#x811A;&#x672C;&#x7684;&#x8F93;&#x51FA;&#x3002;&#x811A;&#x672C;&#x7684;&#x8F93;&#x51FA;&#x5C01;&#x88C5;&#x6210;&#x5408;&#x6CD5;&#x7684;HTTP&#x56DE;&#x590D;&#xFF0C;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x3002;CGI&#x53EF;&#x4EE5;&#x5145;&#x5206;&#x53D1;&#x6325;&#x670D;&#x52A1;&#x5668;&#x7684;&#x53EF;&#x7F16;&#x7A0B;&#x6027;&#xFF0C;&#x8BA9;&#x670D;&#x52A1;&#x5668;&#x53D8;&#x5F97;&#x201C;&#x66F4;&#x806A;&#x660E;&#x201D;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x670D;&#x52A1;&#x5668;&#x548C;CGI&#x811A;&#x672C;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x8981;&#x7B26;&#x5408;CGI&#x6807;&#x51C6;&#x3002;CGI&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;&#x4F7F;&#x7528;Apache&#x670D;&#x52A1;&#x5668;&#x4E0E;Perl&#x5199;&#x7684;CGI&#x811A;&#x672C;&#xFF0C;&#x6216;&#x8005;Python&#x670D;&#x52A1;&#x5668;&#x4E0E;shell&#x5199;&#x7684;CGI&#x811A;&#x672C;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x4E3A;&#x4E86;&#x4F7F;&#x7528;CGI&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528;BaseHTTPServer&#x5305;&#x4E2D;&#x7684;<span style=\"color: #ff0000;\">HTTPServer</span>&#x7C7B;&#x6765;&#x6784;&#x5EFA;&#x670D;&#x52A1;&#x5668;&#x3002;</span><span style=\"font-family: courier new,courier;\">Python&#x670D;&#x52A1;&#x5668;&#x7684;&#x6539;&#x52A8;&#x5F88;&#x7B80;&#x5355;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"><span style=\"color: #ff0000;\">CGIHTTPServer</span>:</span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: courier new,courier;\"><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Written by Vamei</span><span style=\"color: #008000;\">\r\n#</span><span style=\"color: #008000;\"> A messy HTTP server based on TCP socket </span>\r\n\r\n<span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> BaseHTTPServer\r\n</span><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> CGIHTTPServer\r\n\r\nHOST </span>= <span style=\"color: #800000;\">&apos;&apos;</span><span style=\"color: #000000;\">\r\nPORT </span>= 8000\r\n\r\n<span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Create the server, CGIHTTPRequestHandler is pre-defined handler</span>\r\nserver =<span style=\"color: #000000;\"> BaseHTTPServer.HTTPServer((HOST, PORT), CGIHTTPServer.CGIHTTPRequestHandler)\r\n</span><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Start the server</span>\r\nserver.serve_forever()</span></pre>\r\n</div>\r\n<p><span style=\"color: #ff0000; font-family: courier new,courier;\">&#xA0;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"><span style=\"color: #800000;\">CGIHTTPRequestHandler</span>&#x9ED8;&#x8BA4;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x7684;<span style=\"color: #800000;\">cgi-bin</span>&#x548C;<span style=\"color: #800000;\">ht-bin</span>&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x4E3A;CGI&#x811A;&#x672C;&#xFF0C;&#x800C;&#x5B58;&#x653E;&#x4E8E;&#x5176;&#x4ED6;&#x5730;&#x65B9;&#x7684;&#x6587;&#x4EF6;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4E00;&#x4E0B;index.html&#xFF0C;&#x5C06;&#x5176;&#x4E2D;form&#x5143;&#x7D20;&#x6307;&#x5411;&#x7684;action&#x6539;&#x4E3A;cgi-bin/post.py&#x3002;</span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: courier new,courier;\"><span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">head</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">title</span><span style=\"color: #0000ff;\">&gt;</span>WOW<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">title</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">head</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">html</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">p</span><span style=\"color: #0000ff;\">&gt;</span>Wow, Python Server<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">p</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">IMG </span><span style=\"color: #ff0000;\">src</span><span style=\"color: #0000ff;\">=&quot;test.jpg&quot;</span><span style=\"color: #0000ff;\">/&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">form </span><span style=\"color: #ff0000;\">name</span><span style=\"color: #0000ff;\">=&quot;input&quot;</span><span style=\"color: #ff0000;\"> action</span><span style=\"color: #0000ff;\">=&quot;cgi-bin/post.py&quot;</span><span style=\"color: #ff0000;\"> method</span><span style=\"color: #0000ff;\">=&quot;post&quot;</span><span style=\"color: #0000ff;\">&gt;</span><span style=\"color: #000000;\">\r\nFirst name:</span><span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">input </span><span style=\"color: #ff0000;\">type</span><span style=\"color: #0000ff;\">=&quot;text&quot;</span><span style=\"color: #ff0000;\"> name</span><span style=\"color: #0000ff;\">=&quot;firstname&quot;</span><span style=\"color: #0000ff;\">&gt;&lt;</span><span style=\"color: #800000;\">br</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;</span><span style=\"color: #800000;\">input </span><span style=\"color: #ff0000;\">type</span><span style=\"color: #0000ff;\">=&quot;submit&quot;</span><span style=\"color: #ff0000;\"> value</span><span style=\"color: #0000ff;\">=&quot;Submit&quot;</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">form</span><span style=\"color: #0000ff;\">&gt;</span>\r\n<span style=\"color: #0000ff;\">&lt;/</span><span style=\"color: #800000;\">html</span><span style=\"color: #0000ff;\">&gt;</span></span></pre>\r\n</div>\r\n<p>&#xA0;</p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x6211;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;cgi-bin&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5E76;&#x5728;cgi-bin&#x4E2D;&#x653E;&#x5165;&#x5982;&#x4E0B;post.py&#x6587;&#x4EF6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x7684;<span style=\"color: #ff0000;\">CGI&#x811A;&#x672C;</span>&#xFF1A;</span></p>\r\n<div class=\"cnblogs_code\">\r\n<pre><span style=\"font-family: courier new,courier;\"><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\">!/usr/bin/env python</span>\r\n</span></pre>\r\n<pre><span style=\"font-family: courier new,courier;\"><span style=\"color: #008000;\"># </span><span style=\"color: #008000;\">Written by Vamei</span></span></pre>\r\n<pre><span style=\"font-family: courier new,courier;\"><span style=\"color: #0000ff;\">import</span><span style=\"color: #000000;\"> cgi\r\nform </span>=<span style=\"color: #000000;\"> cgi.FieldStorage()\r\n\r\n</span><span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> Output to stdout, CGIHttpServer will take this as response to the client</span>\r\n<span style=\"color: #0000ff;\">print</span> <span style=\"color: #800000;\">&quot;</span><span style=\"color: #800000;\">Content-Type: text/html</span><span style=\"color: #800000;\">&quot;</span>     <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> HTML is following</span>\r\n<span style=\"color: #0000ff;\">print</span>                               <span style=\"color: #008000;\">#</span><span style=\"color: #008000;\"> blank line, end of headers</span>\r\n<span style=\"color: #0000ff;\">print</span> <span style=\"color: #800000;\">&quot;</span><span style=\"color: #800000;\">&lt;p&gt;Hello world!&lt;/p&gt;</span><span style=\"color: #800000;\">&quot;         <span style=\"color: #008000;\"># Start of content</span></span>\r\n<span style=\"color: #0000ff;\">print</span> <span style=\"color: #800000;\">&quot;</span><span style=\"color: #800000;\">&lt;p&gt;</span><span style=\"color: #800000;\">&quot;</span> +  <span style=\"color: #0000ff;\">repr</span>(form[<span style=\"color: #800000;\">&apos;</span><span style=\"color: #800000;\">firstname</span><span style=\"color: #800000;\">&apos;</span>]) + <span style=\"color: #800000;\">&quot;</span><span style=\"color: #800000;\">&lt;/p&gt;</span><span style=\"color: #800000;\">&quot;</span></span></pre>\r\n</div>\r\n<p><span style=\"font-family: courier new,courier;\">(post.py&#x9700;&#x8981;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;&#xFF0C;&#x89C1;&#x8BC4;&#x8BBA;&#x533A;)</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x7B2C;&#x4E00;&#x884C;&#x8BF4;&#x660E;&#x4E86;&#x811A;&#x672C;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x5373;Python&#x3002; cgi&#x5305;&#x7528;&#x4E8E;&#x63D0;&#x53D6;&#x8BF7;&#x6C42;&#x4E2D;&#x5305;&#x542B;&#x7684;&#x8868;&#x683C;&#x4FE1;&#x606F;&#x3002;&#x811A;&#x672C;&#x53EA;&#x8D1F;&#x8D23;&#x5C06;&#x6240;&#x6709;&#x7684;&#x7ED3;&#x679C;&#x8F93;&#x51FA;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;(&#x4F7F;&#x7528;print)&#x3002;CGIHTTPRequestHandler&#x4F1A;&#x6536;&#x96C6;&#x8FD9;&#x4E9B;&#x8F93;&#x51FA;&#xFF0C;&#x5C01;&#x88C5;&#x6210;HTTP&#x56DE;&#x590D;&#xFF0C;&#x4F20;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\"><span style=\"color: #ff0000;\"><span style=\"color: #000000;\">&#x5BF9;&#x4E8E;</span>POST</span>&#x65B9;&#x6CD5;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5B83;&#x7684;URL&#x9700;&#x8981;&#x6307;&#x5411;&#x4E00;&#x4E2A;CGI&#x811A;&#x672C;(&#x4E5F;&#x5C31;&#x662F;&#x5728;cgi-bin&#x6216;&#x8005;ht-bin&#x4E2D;&#x7684;&#x6587;&#x4EF6;)&#x3002;CGIHTTPRequestHandler&#x7EE7;&#x627F;&#x81EA;SimpleHTTPRequestHandler&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x53EF;&#x4EE5;&#x5904;&#x7406;<span style=\"color: #ff0000;\">GET</span>&#x65B9;&#x6CD5;&#x548C;<span style=\"color: #ff0000;\">HEAD</span>&#x65B9;&#x6CD5;&#x7684;&#x8BF7;&#x6C42;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x5982;&#x679C;URL&#x6307;&#x5411;CGI&#x811A;&#x672C;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5C06;&#x811A;&#x672C;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x4F20;&#x9001;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#xFF1B;&#x5F53;&#x6B64;&#x65F6;URL&#x6307;&#x5411;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5C06;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x4F20;&#x9001;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x66F4;&#x8FDB;&#x4E00;&#x6B65;&#xFF0C;&#x6211;&#x53EF;&#x4EE5;&#x8BA9;CGI&#x811A;&#x672C;&#x6267;&#x884C;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#x5C06;&#x63A5;&#x6536;&#x5230;&#x7684;&#x6570;&#x636E;&#x653E;&#x5165;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#xFF0C;&#x4EE5;&#x53CA;&#x66F4;&#x4E30;&#x5BCC;&#x7684;&#x7A0B;&#x5E8F;&#x64CD;&#x4F5C;&#x3002;&#x76F8;&#x5173;&#x5185;&#x5BB9;&#x4ECE;&#x7565;&#x3002;<br></span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#xA0;</span></p>\r\n<h3><span style=\"font-family: courier new,courier;\">&#x603B;&#x7ED3;</span></h3>\r\n<p><span style=\"font-family: courier new,courier;\">&#x6211;&#x4F7F;&#x7528;&#x4E86;Python&#x6807;&#x51C6;&#x5E93;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;<span style=\"color: #ff0000;\">&#x9AD8;&#x7EA7;&#x5305;</span>&#x7B80;&#x5316;&#x4E86;Python&#x670D;&#x52A1;&#x5668;&#x3002;&#x6700;&#x7EC8;&#x7684;&#x6548;&#x679C;&#x5206;&#x79BB;&#x9759;&#x6001;&#x5185;&#x5BB9;&#x3001;CGI&#x5E94;&#x7528;&#x548C;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x964D;&#x4F4E;&#x4E09;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#xFF0C;&#x8BA9;&#x4EE3;&#x7801;&#x53D8;&#x5F97;&#x7B80;&#x5355;&#x800C;&#x5BB9;&#x6613;&#x7EF4;&#x62A4;&#x3002;</span></p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x5E0C;&#x671B;&#x4F60;&#x4EAB;&#x53D7;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x7535;&#x8111;&#x4E0A;&#x67B6;&#x8BBE;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</span></p>\r\n<p>&#xA0;</p>\r\n<p><span style=\"font-family: courier new,courier;\">&#x6B22;&#x8FCE;&#x7EE7;&#x7EED;&#x9605;&#x8BFB;&#x201C;<a href=\"http://www.cnblogs.com/vamei/archive/2012/09/13/2682778.html\">Python&#x5FEB;&#x901F;&#x6559;&#x7A0B;</a>&#x201D;</span></p>"}